{"ast":null,"code":"import _classCallCheck from\"/Users/cch/cch/pp/react/redash/template/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/cch/cch/pp/react/redash/template/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/cch/cch/pp/react/redash/template/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/cch/cch/pp/react/redash/template/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/cch/cch/pp/react/redash/template/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Cwbstation from'./Cwbstation';var makeStation=function makeStation(sta){var output=[];for(var i=0;i<sta.length;++i){output.push(React.createElement(Cwbstation,{station:sta[i]}));}return output;};export var Cwbdata=/*#__PURE__*/function(_Component){_inherits(Cwbdata,_Component);function Cwbdata(props){var _this;_classCallCheck(this,Cwbdata);_this=_possibleConstructorReturn(this,_getPrototypeOf(Cwbdata).call(this,props));_this.state={cwbFetched:false};_this.cwbstations={};_this.getCWB();return _this;}_createClass(Cwbdata,[{key:\"getCWB\",value:function getCWB(){var _this2=this;fetch('https://opendata.cwb.gov.tw/api/v1/rest/datastore/O-A0001-001?Authorization=rdec-key-123-45678-011121314&format=JSON',{method:\"GET\"}).then(function(res){return res.json();}).then(function(data){/*接到request data後要做的事情*/ // this.setState({repoName: data[0]['name']});\nconsole.log(data);_this2.cwbstations=data[\"records\"][\"location\"];_this2.stationCount=_this2.cwbstations.length;_this2.setState({cwbFetched:true});}).catch(function(e){/*發生錯誤時要做的事情*/console.log(e);});}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(\"div\",{className:\"az-dashboard-one-title\"},React.createElement(\"div\",null,React.createElement(\"h2\",{className:\"az-dashboard-title\"},\"Cwb open data\"),React.createElement(\"p\",{className:\"az-dashboard-text\"},\"Acquring from cwb's opendata\")),React.createElement(\"div\",{className:\"az-content-header-right\"},React.createElement(\"div\",{className:\"media\"},React.createElement(\"div\",{className:\"media-body\"},React.createElement(\"label\",null,\"Data Counts\"),React.createElement(\"h6\",null,this.stationCount))),React.createElement(\"button\",{className:\"btn btn-purple\",onClick:this.getCWB},\"Refresh\"))),React.createElement(\"div\",null,React.createElement(\"div\",{className:\"table-responsive\"},React.createElement(\"table\",{className:\"table\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",{className:\"wd-5p\"},\"\\xA0\"),React.createElement(\"th\",{className:\"wd-15p\"},\"\\u6E2C\\u7AD9\\u540D\\u7A31\"),React.createElement(\"th\",{className:\"wd-35p\"},\"\\u89C0\\u6E2C\\u6578\\u64DA\"),React.createElement(\"th\",{className:\"wd-10p\"},\"\\u8CC7\\u6599\\u6642\\u9593\"))),React.createElement(\"tbody\",null,this.state.cwbFetched===true?makeStation(this.cwbstations):React.createElement(\"div\",null))))));}}]);return Cwbdata;}(Component);export default Cwbdata;","map":{"version":3,"sources":["/Users/cch/cch/pp/react/redash/template/src/app/dashboard/Cwbdata.js"],"names":["React","Component","Cwbstation","makeStation","sta","output","i","length","push","Cwbdata","props","state","cwbFetched","cwbstations","getCWB","fetch","method","then","res","json","data","console","log","stationCount","setState","catch","e"],"mappings":"gnBACA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,GAAMC,CAAAA,WAAW,CAAC,QAAZA,CAAAA,WAAY,CAACC,GAAD,CAAO,CAErB,GAAIC,CAAAA,MAAM,CAAC,EAAX,CACA,IAAI,GAAIC,CAAAA,CAAC,CAAC,CAAV,CAAYA,CAAC,CAACF,GAAG,CAACG,MAAlB,CAAyB,EAAED,CAA3B,EACID,MAAM,CAACG,IAAP,CAAY,oBAAC,UAAD,EAAY,OAAO,CAAEJ,GAAG,CAACE,CAAD,CAAxB,EAAZ,EADJ,CAEA,MAAOD,CAAAA,MAAP,CACH,CAND,CAOA,UAAaI,CAAAA,OAAb,iEACI,iBAAYC,KAAZ,CAAmB,yCACf,yEAAMA,KAAN,GACA,MAAKC,KAAL,CAAW,CACPC,UAAU,CAAC,KADJ,CAAX,CAGE,MAAKC,WAAL,CAAiB,EAAjB,CACA,MAAKC,MAAL,GANa,aAOhB,CARP,2DASc,iBACNC,KAAK,CAAE,sHAAF,CAAyH,CAACC,MAAM,CAAC,KAAR,CAAzH,CAAL,CACCC,IADD,CACM,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADT,EAECF,IAFD,CAEM,SAAAG,IAAI,CAAI,CACR,wBADQ,CAER;AACAC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACA,MAAI,CAACP,WAAL,CAAiBO,IAAI,CAAC,SAAD,CAAJ,CAAgB,UAAhB,CAAjB,CACA,MAAI,CAACG,YAAL,CAAkB,MAAI,CAACV,WAAL,CAAiBN,MAAnC,CACA,MAAI,CAACiB,QAAL,CAAc,CACZZ,UAAU,CAAE,IADA,CAAd,EAGL,CAXD,EAYCa,KAZD,CAYO,SAAAC,CAAC,CAAI,CACR,cACAL,OAAO,CAACC,GAAR,CAAYI,CAAZ,EACH,CAfD,EAgBD,CA1BP,uCA2Ba,CACL,MACI,gCACgB,2BAAK,SAAS,CAAC,wBAAf,EACd,+BACE,0BAAI,SAAS,CAAC,oBAAd,kBADF,CAEE,yBAAG,SAAS,CAAC,mBAAb,iCAFF,CADc,CAUd,2BAAK,SAAS,CAAC,yBAAf,EACE,2BAAK,SAAS,CAAC,OAAf,EACE,2BAAK,SAAS,CAAC,YAAf,EACE,+CADF,CAEE,8BAAK,KAAKH,YAAV,CAFF,CADF,CADF,CASE,8BAAQ,SAAS,CAAC,gBAAlB,CAAmC,OAAO,CAAE,KAAKT,MAAjD,YATF,CAVc,CADhB,CAwBA,+BACA,2BAAK,SAAS,CAAC,kBAAf,EACQ,6BAAO,SAAS,CAAC,OAAjB,EACE,iCACE,8BACA,0BAAI,SAAS,CAAC,OAAd,SADA,CAEE,0BAAI,SAAS,CAAC,QAAd,6BAFF,CAIE,0BAAI,SAAS,CAAC,QAAd,6BAJF,CAKE,0BAAI,SAAS,CAAC,QAAd,6BALF,CADF,CADF,CAUE,iCAEM,KAAKH,KAAL,CAAWC,UAAX,GAAwB,IAAxB,CACAT,WAAW,CAAC,KAAKU,WAAN,CADX,CAEC,+BAJP,CAVF,CADR,CADA,CAxBA,CADJ,CAkDH,CA9EL,qBAA6BZ,SAA7B,EAgFA,cAAeQ,CAAAA,OAAf","sourcesContent":["\nimport React, { Component } from 'react'\nimport Cwbstation from './Cwbstation'\nconst makeStation=(sta)=>{\n    \n    var output=[];\n    for(let i=0;i<sta.length;++i)\n        output.push(<Cwbstation station={sta[i]} />)\n    return output;\n}\nexport class Cwbdata extends Component {\n    constructor(props) {\n        super(props);\n        this.state={\n            cwbFetched:false\n          }\n          this.cwbstations={}\n          this.getCWB();\n      };\n      getCWB(){\n        fetch( 'https://opendata.cwb.gov.tw/api/v1/rest/datastore/O-A0001-001?Authorization=rdec-key-123-45678-011121314&format=JSON',{method:\"GET\"})\n        .then(res => res.json())\n        .then(data => {\n              /*接到request data後要做的事情*/\n              // this.setState({repoName: data[0]['name']});\n              console.log(data);\n              this.cwbstations=data[\"records\"][\"location\"];\n              this.stationCount=this.cwbstations.length;\n              this.setState({\n                cwbFetched: true\n              })\n        })\n        .catch(e => {\n            /*發生錯誤時要做的事情*/\n            console.log(e);\n        })\n      }\n    render() {\n        return (\n            <div>\n                            <div className=\"az-dashboard-one-title\">\n              <div>\n                <h2 className=\"az-dashboard-title\">Cwb open data</h2>\n                <p className=\"az-dashboard-text\">Acquring from cwb's opendata</p>\n              </div>\n            \n              \n            \n              \n             \n              <div className=\"az-content-header-right\">\n                <div className=\"media\">\n                  <div className=\"media-body\">\n                    <label>Data Counts</label>\n                    <h6>{this.stationCount}</h6>\n                  </div>{/* media-body */}\n                </div>{/* media */}\n\n\n                <button className=\"btn btn-purple\" onClick={this.getCWB}>Refresh</button>\n              </div>\n            </div>{/* az-dashboard-one-title */}\n            \n            <div>\n            <div className=\"table-responsive\">\n                    <table className=\"table\">\n                      <thead>\n                        <tr>\n                        <th className=\"wd-5p\">&nbsp;</th>\n                          <th className=\"wd-15p\">測站名稱</th>\n                        \n                          <th className=\"wd-35p\">觀測數據</th>\n                          <th className=\"wd-10p\">資料時間</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {\n                            this.state.cwbFetched===true?\n                            makeStation(this.cwbstations):\n                            (<div></div>)\n                            }\n                          </tbody>\n                    </table>\n\n            </div>\n            </div>\n            </div>\n        )\n    }\n}\nexport default Cwbdata\n"]},"metadata":{},"sourceType":"module"}